import{$ as pt,$a as A,A as le,Aa as Dt,Ab as ge,B as yt,Ba as kt,Bb as ie,C as r,Ca as Pt,Cb as oe,D as n,Da as Ut,Db as Lt,E as c,Ea as Rt,Eb as re,F as M,Fa as At,Fb as ne,G as b,Ga as Vt,Gb as zt,H as ce,Ha as Nt,Hb as Kt,I as x,Ia as jt,J as u,Ja as I,Jb as _t,K as se,Ka as O,L as p,Lb as vt,M as S,Mb as qt,N as Tt,Nb as Ct,O as Ft,Ob as ye,P as It,Pb as Wt,Q as ve,Qb as Ht,R as h,S as me,Sa as ut,Ta as E,Ua as D,V as Ce,Va as k,X as xe,Xa as P,Y as lt,Ya as U,Z as st,_ as mt,_a as R,ab as V,ba as w,bb as N,c as fe,cb as j,d as we,db as G,e as Mt,eb as B,f as St,fb as $,gb as L,ha as Ot,hb as z,ib as K,jb as Gt,k as _e,kb as q,lb as W,m as d,ma as Et,mb as H,n as g,nb as Q,o as _,p as v,pb as J,r as l,ra as pe,rb as Y,sa as bt,ta as ue,tb as X,ua as Se,ub as Bt,va as y,vb as Z,wa as dt,wb as ft,x as f,xa as T,xb as ee,y as s,ya as ct,yb as $t,z as wt,za as F,zb as te}from"./chunk-CB6YFUGH.js";var gt=(()=>{class t{constructor(){this.uid=localStorage.getItem("uid"),this.auth=d(Et),this.rtd=d(Kt)}sendMessage(e,i,o){return fe(this,null,function*(){let a={from:e,to:i,message:o,on:this.getFormattedDateTime(),timestamp:Date.now()},ae=ye(this.rtd,`chats/${this.getSortedSenderReceiver(e,i)}`),C=qt(ae),ht=ye(this.rtd,`lastChats/${this.getSortedSenderReceiver(e,i)}`);return Ht(ht,a),Wt(C,a)})}getMessages(e,i){let o=ye(this.rtd,`chats/${this.getSortedSenderReceiver(e,i)}`),a=Ct(o,vt("timestamp"));return _t(a)}getRecentChats(){let e=ye(this.rtd,"lastChats"),i=Ct(e,vt("timestamp")),o=_t(i);return console.log(o),o}getSortedSenderReceiver(e,i){return[e,i].sort().join("_")}getFormattedDateTime(){let e=new Date,i=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getFullYear()).slice(-2),ae=String(e.getHours()).padStart(2,"0"),C=String(e.getMinutes()).padStart(2,"0");return`${i}/${o}/${a} ${ae}:${C}`}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function he(t){let m=t.split(" ");return m.length>=2?m[0].charAt(0).toUpperCase()+m[1].charAt(0).toUpperCase():m[0].charAt(0).toUpperCase()}var Me=(()=>{class t{constructor(){this.tabSubject=new we,this.receiverSubject=new we,this.groupSubject=new we,this.callsSubject=new we,this.tab$=this.tabSubject.asObservable(),this.receiver$=this.receiverSubject.asObservable(),this.group$=this.groupSubject.asObservable(),this.calls$=this.callsSubject.asObservable()}setTab(e=null){this.tabSubject.next(e)}setReceiver(e=null){this.receiverSubject.next(e)}setGroup(e=null){this.groupSubject.next(e)}setCalls(e=null){this.callsSubject.next(e)}clearAll(){this.receiverSubject.next(null),this.groupSubject.next(null),this.callsSubject.next(null)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var be=(()=>{class t{constructor(){this.mobileSidebar=new Mt(!0),this.sidebar=new Mt(!1),this.mobileSidebar$=this.mobileSidebar.asObservable(),this.sidebar$=this.sidebar.asObservable()}toggleMobileSidebar(){this.mobileSidebar.next(!this.mobileSidebar.value)}toggleSidebar(){this.sidebar.next(!this.sidebar.value)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=_e({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oi=()=>({"background-color":"#ece9fc",color:"#2a1261"});function ri(t,m){if(t&1){let e=ce();r(0,"div")(1,"div",1),x("click",function(){let o,a=_(e).$implicit,ae=u();return v(ae.startChat((o=a==null||a.other_party==null?null:a.other_party.userId)!==null&&o!==void 0?o:null))}),c(2,"p-avatar",2),r(3,"div",3)(4,"h5",4),p(5),n(),r(6,"span",5),p(7),n()()(),c(8,"div",6),n()}if(t&2){let e,i,o=m.$implicit,a=u();l(2),le(me(5,oi)),s("label",a.dp((e=o==null||o.other_party==null?null:o.other_party.name)!==null&&e!==void 0?e:"Un Known")),l(3),S((i=o==null||o.other_party==null?null:o.other_party.name)!==null&&i!==void 0?i:"Anonymous"),l(2),S(o.message)}}var Qt=(()=>{class t{constructor(){this.recentChats=[],this.chatService=d(gt),this.authService=d(pe),this.tabService=d(Me),this.sidebarService=d(be),this.uid=localStorage.getItem("uid")}ngOnInit(){this.getChatsRecent()}getChatsRecent(){return fe(this,null,function*(){try{this.chatService.getRecentChats().subscribe(e=>fe(this,null,function*(){let i=e.filter(a=>a.from===this.uid||a.to===this.uid),o=yield Promise.all(i.map(a=>fe(this,null,function*(){let ae=a.from===this.uid?a.to:a.from,C=a.from!==this.uid?a.to:a.from;return a.other_party=yield this.loadUser(ae),a.me=yield this.loadUser(C),a})));this.recentChats=o.reverse(),console.log(this.recentChats)}))}catch(e){console.error(e)}})}dp(e){return he(e)}loadUser(e){return St(this.authService.getUserById(e))}startChat(e){console.log(e),this.sidebarService.toggleMobileSidebar(),this.tabService.setReceiver(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-my-chats"]],standalone:!0,features:[h],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["appRipple","",1,"px-2","py-3","flex","align-items-center","gap-2","select-none","cursor-pointer","border-round",3,"click"],["size","normal",3,"label"],[1,"flex-grow-1"],[1,"m-0"],[1,"text-xs"],[1,"mx-1","surface-200",2,"height","1px"]],template:function(i,o){i&1&&f(0,ri,9,6,"div",0),i&2&&s("ngForOf",o.recentChats)},dependencies:[T,F,D,U,P,R,A,V,N,k,j,G,B,$,L,z,K,E,q,W,H,Q,I,J,Y,X,Z,ee,te,ie,ge,oe,re,ne,y,O,w,xe,zt],styles:["[_nghost-%COMP%]     .card-container .card{width:75px;height:75px;display:flex;align-items:center;justify-content:center;margin-right:1rem;-webkit-user-select:none;user-select:none;padding:0}[_nghost-%COMP%]     .card-container .card.primary-box{background-color:var(--primary-color);padding:0;color:var(--primary-color-text)}[_nghost-%COMP%]     .card-container .card.styled-box-green .p-ink{background:#4baf504d}[_nghost-%COMP%]     .card-container .card.styled-box-orange .p-ink{background:#ffc1064d}[_nghost-%COMP%]     .card-container .card.styled-box-purple .p-ink{background:#9c27b04d}[_nghost-%COMP%]     .card-container .card:last-child{margin-right:0}"]})}}return t})();var ni=()=>({"background-color":"#ece9fc",color:"#2a1261"});function ai(t,m){if(t&1){let e=ce();r(0,"div",1),c(1,"p-avatar",2),r(2,"div",3)(3,"h5",4),p(4),n(),r(5,"span",5),p(6),n()(),r(7,"p-button",6),x("onClick",function(){_(e);let o=u();return v(o.startChat(o.id))}),n()()}if(t&2){let e,i=u();l(),le(me(7,ni)),s("label",i.dp((e=i.name)!==null&&e!==void 0?e:"Un Known")),l(3),S(i.name),l(2),S(i.email),l(),s("rounded",!0)("text",!0)}}var Yt=(()=>{class t{constructor(){this.id=null,this.name=null,this.email=null,this.profile_pic=null,this.tabService=d(Me),this.sidebarService=d(be)}dp(e){return he(e)}startChat(e){this.sidebarService.toggleMobileSidebar(),this.tabService.setReceiver(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-friend-item-view"]],inputs:{id:"id",name:"name",email:"email",profile_pic:"profile_pic"},standalone:!0,features:[h],decls:2,vars:0,consts:[["pTemplate","p-card-content"],[1,"flex","align-items-center","gap-2"],["size","normal",3,"label"],[1,"flex-grow-1"],[1,"m-0"],[1,"text-xs"],["icon","pi pi-comment","styleClass","cursor-pointer h-2rem w-2rem","severity","info",3,"onClick","rounded","text"]],template:function(i,o){i&1&&(r(0,"p-card"),f(1,ai,8,8,"ng-template",0),n())},dependencies:[T,dt,Se,F,ct,D,U,P,R,A,V,N,k,j,G,B,$,L,z,K,E,q,W,H,Q,I,J,Y,X,Z,ee,te,ie,ge,oe,re,ne,y,O,w]})}}return t})();function li(t,m){if(t&1&&(r(0,"div"),c(1,"app-friend-item-view",5),n()),t&2){let e=m.$implicit;l(),s("id",e.userId)("name",e.name)("email",e.email)("profile_pic",e.profile_pic)}}function si(t,m){if(t&1&&(M(0),f(1,li,2,4,"div",4),b()),t&2){let e=u(2);l(),s("ngForOf",e.users)}}function mi(t,m){}function pi(t,m){if(t&1&&(M(0),f(1,si,2,1,"ng-container",3)(2,mi,0,0,"ng-template",null,1,Ce),b()),t&2){let e=se(3),i=u();l(),s("ngIf",i.users.length!=0)("ngIfElse",e)}}function di(t,m){t&1&&(r(0,"div",7),c(1,"p-skeleton",8),r(2,"div",9),c(3,"p-skeleton",10)(4,"p-skeleton",11),n(),c(5,"p-skeleton",12),n())}function ci(t,m){t&1&&(r(0,"div")(1,"p-card"),f(2,di,6,0,"ng-template",6),n()())}function ui(t,m){if(t&1&&f(0,ci,3,0,"div",4),t&2){let e=u();s("ngForOf",e.userSekeletons)}}var Xt=(()=>{class t{constructor(){this.users=[],this.authService=d(pe),this.messageService=d(ue),this.uid=null,this.isLoading=!1,this.userSekeletons=Array(5).fill(0).map((e,i)=>i)}ngOnInit(){this.uid=localStorage.getItem("uid"),this.getUsers()}getUsers(){this.isLoading=!0;try{this.authService.getAllUsers(this.uid).subscribe(e=>{this.users=e})}catch{this.messageService.add({severity:"error",summary:"Failed",detail:"Something went wrong"})}finally{this.isLoading=!1}}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-friends"]],standalone:!0,features:[ve([ue]),h],decls:4,vars:2,consts:[["loading",""],["noUsersFound",""],[1,"p-1","flex","flex-column","gap-1"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"id","name","email","profile_pic"],["pTemplate","p-card-content"],[1,"flex","align-items-center","gap-2"],["width","2rem","height","2rem","borderRadius","6px"],[1,"flex-grow-1"],["styleClass","m-1","width","50%","height","14px","borderRadius","2px"],["styleClass","m-1","width","90%","height","14px","borderRadius","2px"],["styleClass","m-1","width","2rem","height","2rem","borderRadius","50%"]],template:function(i,o){if(i&1&&(r(0,"div",2),f(1,pi,4,2,"ng-container",3)(2,ui,1,1,"ng-template",null,0,Ce),n()),i&2){let a=se(3);l(),s("ngIf",!o.isLoading)("ngIfElse",a)}},dependencies:[T,Se,F,ct,D,U,P,R,A,V,N,k,j,G,B,$,L,z,K,E,q,W,H,Q,I,J,Y,X,Z,ee,te,ie,oe,re,Lt,ne,y,O,w,xe,lt,Yt]})}}return t})();var Zt=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-groups"]],standalone:!0,features:[h],decls:2,vars:0,template:function(i,o){i&1&&(r(0,"p"),p(1,"groups works!"),n())}})}}return t})();var ei=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-calls"]],standalone:!0,features:[h],decls:2,vars:0,template:function(i,o){i&1&&(r(0,"p"),p(1,"calls works!"),n())}})}}return t})();var fi=()=>({"background-color":"#dee9fc",color:"#1a2551"});function gi(t,m){if(t&1&&(r(0,"a",14),c(1,"span"),n()),t&2){let e=m.$implicit;s("pTooltip",e.label),l(),yt("p-menuitem-icon pi pi-comments "+e.icon)}}function hi(t,m){t&1&&(M(0),c(1,"app-my-chats"),b())}function Mi(t,m){t&1&&(M(0),c(1,"app-friends"),b())}function bi(t,m){t&1&&(M(0),c(1,"app-groups"),b())}function _i(t,m){t&1&&(M(0),c(1,"app-calls"),b())}function vi(t,m){t&1&&(M(0),p(1,"Nothing"),b())}var ti=(()=>{class t{constructor(){this.confirmationService=d(bt),this.authServices=d(pe),this.router=d(Ot),this.tabService=d(Me),this.messageService=d(ue),this.isMobileSidebarOpen=!1,this.user=null}ngOnInit(){this.items=[{label:"Chats",icon:"pi pi-comments"},{label:"Friends",icon:"pi pi-users"},{label:"Groups",icon:"pi pi-list"},{label:"Calls",icon:"pi pi-circle-on"}],this.activeMenu=this.items[0],this.getCurrentUser()}dp(e){return he(e)}getCurrentUser(){let e=localStorage.getItem("uid");try{this.authServices.getUserById(e).subscribe(i=>{this.user=i})}catch{this.messageService.add({severity:"error",summary:"Failed",detail:"Something went wrong"})}}onTabChange(){this.tabService.setTab(this.activeMenu?.label)}confirmLogout(e){this.confirmationService.confirm({target:e.target,message:"Are you sure you want to logout from NgChats?",header:"Logout Confirmation",icon:"pi pi-info-circle",acceptButtonStyleClass:"p-button-danger p-button-text",rejectButtonStyleClass:"p-button-text p-button-text",acceptIcon:"none",rejectIcon:"none",accept:()=>fe(this,null,function*(){yield this.authServices.logout(),this.router.navigate(["/login"])}),reject:()=>{}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-sidebar"]],standalone:!0,features:[ve([bt,ue]),h],decls:22,vars:11,consts:[["op",""],[1,"w-full","bg-white","text-muted","border-round","flex","flex-column",2,"height","100%","width","100%"],[1,"flex","justify-content-between","align-items-center","text-primary"],[1,"m-2"],["styleClass","mr-2 cursor-pointer","shape","circle",3,"click","label"],[1,"flex","flex-column","w-8rem","settings"],[1,"cursor-pointer","hover:bg-blue-50","hover:text-primary","border-round"],[1,"cursor-pointer","hover:bg-red-50","text-danger","border-round",3,"click"],[3,"activeItemChange","model","activeItem"],["pTemplate","item"],[1,"w-full","flex-grow-1","overflow-y-scroll"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["role","menuitem","pripple","","tooltipPosition","top","target","undefined","tabindex","0",1,"p-ripple","p-element","p-menuitem-link",3,"pTooltip"]],template:function(i,o){if(i&1){let a=ce();r(0,"div",1)(1,"div",2)(2,"h1",3),p(3,"Ng Chats"),n(),r(4,"p-avatar",4),x("click",function(C){_(a);let ht=se(6);return v(ht.toggle(C))}),r(5,"p-overlayPanel",null,0)(7,"ul",5)(8,"li",6),p(9,"Profile"),n(),r(10,"li",7),x("click",function(C){return _(a),v(o.confirmLogout(C))}),p(11,"Logout"),n()()()()(),r(12,"p-tabMenu",8),It("activeItemChange",function(C){return _(a),Ft(o.activeMenu,C)||(o.activeMenu=C),v(C)}),x("activeItemChange",function(){return _(a),v(o.onTabChange())}),f(13,gi,2,3,"ng-template",9),n(),r(14,"div",10)(15,"div",11),f(16,hi,2,0,"ng-container",12)(17,Mi,2,0,"ng-container",12)(18,bi,2,0,"ng-container",12)(19,_i,2,0,"ng-container",12)(20,vi,2,0,"ng-container",13),n()()(),c(21,"p-confirmDialog")}if(i&2){let a;l(4),le(me(10,fi)),s("label",o.dp((a=o.user==null?null:o.user.name)!==null&&a!==void 0?a:"Un Known")),l(8),s("model",o.items),Tt("activeItem",o.activeMenu),l(3),s("ngSwitch",o.activeMenu==null?null:o.activeMenu.label),l(),s("ngSwitchCase","Chats"),l(),s("ngSwitchCase","Friends"),l(),s("ngSwitchCase","Groups"),l(),s("ngSwitchCase","Calls")}},dependencies:[T,Se,F,D,U,P,R,A,V,N,k,j,G,B,$,ut,L,z,K,E,q,W,H,Q,I,J,Y,X,Z,Bt,ee,ft,te,$t,ie,ge,oe,re,ne,y,O,w,st,mt,pt,Qt,Xt,Zt,ei],styles:["ul.settings[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul.settings[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4rem .5rem}.bg-red-100[_ngcontent-%COMP%]{background-color:var(--red-100)}"]})}}return t})();var xt=()=>({"background-color":"#ece9fc",color:"#2a1261"});function Ci(t,m){t&1&&(M(0),r(1,"div",8),p(2," Calls Tab "),n(),b())}function xi(t,m){if(t&1&&(M(0),f(1,Ci,3,0,"ng-container",7),b()),t&2){let e=u(),i=se(5);l(),s("ngIf",e.calls!=null)("ngIfElse",i)}}function Si(t,m){if(t&1&&(M(0),r(1,"div",28),c(2,"p-avatar",29),r(3,"div",30)(4,"div",31)(5,"span",32),p(6),n()(),r(7,"small"),p(8),n()()(),b()),t&2){let e,i,o=u().$implicit,a=u(3);l(2),le(me(6,xt)),s("pTooltip",(e=a.currentUser==null?null:a.currentUser.name)!==null&&e!==void 0?e:"Un Known")("label",a.dp((i=a.currentUser==null?null:a.currentUser.name)!==null&&i!==void 0?i:"Un Known")),l(4),S(o.message),l(2),S(o.on)}}function wi(t,m){if(t&1&&(r(0,"div",33),c(1,"p-avatar",34),r(2,"div",15)(3,"div",35)(4,"span",32),p(5),n()(),r(6,"small"),p(7),n()()()),t&2){let e,i,o=u().$implicit,a=u(3);l(),le(me(6,xt)),s("pTooltip",(e=a.ngUser==null?null:a.ngUser.name)!==null&&e!==void 0?e:"Un Known")("label",a.dp((i=a.ngUser==null?null:a.ngUser.name)!==null&&i!==void 0?i:"Un Known")),l(4),S(o.message),l(2),S(o.on)}}function yi(t,m){if(t&1&&(r(0,"div"),f(1,Si,9,7,"ng-container",7)(2,wi,8,7,"ng-template",null,2,Ce),n()),t&2){let e=m.$implicit,i=se(3),o=u(3);l(),s("ngIf",e.from==(o.currentUser==null?null:o.currentUser.userId))("ngIfElse",i)}}function Ti(t,m){t&1&&(r(0,"small",36),p(1," Message is required "),n())}function Fi(t,m){if(t&1){let e=ce();M(0),r(1,"div",8)(2,"div",9)(3,"div",10)(4,"i",11),x("click",function(){_(e);let o=u(2);return v(o.onClickToggleMobileSidebar())}),n(),c(5,"p-avatar",12),n(),r(6,"div",13)(7,"h3",14),p(8),n()(),r(9,"div",15)(10,"p-button",16),x("onClick",function(o){_(e);let a=se(12);return v(a.toggle(o))}),r(11,"p-overlayPanel",null,1)(13,"ul",17)(14,"li",18),p(15,"Favorite"),n(),r(16,"li",19),p(17,"Report"),n()()()()()(),r(18,"div",20),f(19,yi,4,2,"div",21),n(),r(20,"div",22)(21,"div",23)(22,"form",24),x("submit",function(){_(e);let o=u(2);return v(o.sendMessage())}),r(23,"textarea",25),p(24,"                                "),n(),c(25,"p-button",26),n(),f(26,Ti,2,0,"small",27),n()()(),b()}if(t&2){let e,i,o=u(2);l(5),le(me(10,xt)),s("label",o.dp((e=o.ngUser==null?null:o.ngUser.name)!==null&&e!==void 0?e:"Un Known")),l(3),S(o.ngUser==null?null:o.ngUser.name),l(2),s("rounded",!0)("text",!0),l(9),s("ngForOf",o.chatMessages),l(3),s("formGroup",o.messageForm),l(3),s("loading",o.isLoading),l(),s("ngIf",(o.messageForm==null||(i=o.messageForm.get("message"))==null?null:i.touched)&&(o.messageForm==null||(i=o.messageForm.get("message"))==null?null:i.hasError("required")))}}function Ii(t,m){if(t&1&&(M(0),f(1,Fi,27,11,"ng-container",7),b()),t&2){let e=u(),i=se(5);l(),s("ngIf",e.receiver!=null)("ngIfElse",i)}}function Oi(t,m){if(t&1){let e=ce();r(0,"div",37)(1,"h1",38),p(2,"Hi "),r(3,"span",39),p(4),n()(),c(5,"img",40),r(6,"button",41),p(7,"Start Chatting \u{1F44B}"),n(),r(8,"button",42),x("click",function(){_(e);let o=u();return v(o.onClickToggleMobileSidebar())}),p(9,"Start Chatting \u{1F44B}"),n()()}if(t&2){let e=u();l(4),S(e.currentUser==null?null:e.currentUser.name)}}var ii=(()=>{class t{constructor(){this.tab="Chats",this.receiver=null,this.group=null,this.calls=null,this.tabService=d(Me),this.ngUser=null,this.currentUser=null,this.authService=d(pe),this.messageService=d(ue),this.chatService=d(gt),this.sidebarService=d(be),this.isLoading=!1,this.uid=null,this.chatMessages=[]}ngOnInit(){this.uid=localStorage.getItem("uid")??null,this.loadUser(this.uid,!0),this.tabService.tab$.subscribe(e=>{this.tab=e??"Chats"}),this.tabService.receiver$.subscribe(e=>{this.receiver=e??null,e!=null&&(this.loadUser(e),this.getMessageObserver())}),this.messageForm=new Rt({message:new At(null,[kt.required])})}dp(e="Un Known"){return he(e)}loadUser(e,i=!1){this.isLoading=!0;try{this.authService.getUserById(e).subscribe(o=>{i?this.currentUser=o:this.ngUser=o})}catch{this.messageService.add({severity:"error",summary:"Failed",detail:"Unable to fetch the user"})}finally{this.isLoading=!1}}sendMessage(){if(this.messageForm?.invalid){this.messageForm?.markAllAsTouched();return}this.isLoading=!0;try{console.log(this.uid,this.receiver,this.messageForm?.get("message")?.value),this.chatService.sendMessage(this.uid,this.receiver,this.messageForm?.get("message")?.value),this.messageForm?.reset()}catch(e){console.log(e),this.messageService.add({severity:"error",summary:"Failed",detail:"Unable to send the message"})}finally{this.isLoading=!1}}getMessageObserver(){this.chatService.getMessages(this.uid,this.receiver).subscribe(e=>{this.chatMessages=e,console.log(e)})}onClickToggleMobileSidebar(){this.sidebarService.toggleMobileSidebar()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-chatbox"]],standalone:!0,features:[ve([ue]),h],decls:6,vars:2,consts:[["nothing",""],["op",""],["other",""],[1,"w-full","bg-white","text-muted","border-round",2,"height","90vh"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf","ngIfElse"],[1,"w-full","flex","flex-column",2,"height","90vh"],[1,"chat-header","p-2","w-full","h-4rem","flex","align-items-center","gap-2"],[1,"flex","gap-3","align-items-center"],[1,"toggle-sidebar","pi","pi-arrow-left","m-1","cursor-pointer",3,"click"],["size","normal",3,"label"],[1,"flex-grow-1"],[1,"m-0","text-color"],[1,""],["styleClass","m-2 cursor-pointer h-2rem w-2rem","icon","pi pi-ellipsis-v","size","small",3,"onClick","rounded","text"],[1,"flex","flex-column","w-8rem","settings"],[1,"cursor-pointer","hover:bg-blue-50","hover:text-primary","border-round"],[1,"cursor-pointer","hover:bg-red-50","text-danger","border-round"],[1,"chat-body","p-2","w-full","flex-grow-1","surface-100","overflow-y-scroll"],[4,"ngFor","ngForOf"],[1,"chat-footer","p-2","w-full","flex","gap-2"],[1,"w-full"],[1,"w-full","flex","gap-2",3,"submit","formGroup"],["rows","2","formControlName","message","pInputTextarea","",1,"w-full"],["type","submit","label","SEND","icon","pi pi-send","styleClass","h-full px-5",3,"loading"],["class","text-danger",4,"ngIf"],[1,"right","flex","gap-2","m-1","flex-row-reverse"],["tooltipPosition","top","size","normal",3,"pTooltip","label"],[1,"flex","flex-column","align-items-end"],[1,"chat-right","message","bg-primary","p-2","border-round","max-w-25rem"],[1,"w-full","h-full","text-overflow-wrap"],[1,"left","flex","gap-2","m-1"],["size","normal",3,"pTooltip","label"],[1,"chat-left","message","bg-primary","p-2","border-round","max-w-25rem","ml-10"],[1,"text-danger"],[1,"w-full","flex","flex-column","justify-content-center","align-items-center","gap-5",2,"height","90vh"],[2,"font-size","2.4rem"],[1,"text-primary"],["src","../../../../assets/ChatNow.jpg","alt","chat-img","height","50%"],[1,"chat","btn-grad"],[1,"chat-mobile","btn-grad",3,"click"]],template:function(i,o){i&1&&(r(0,"div",3)(1,"div",4),f(2,xi,2,2,"ng-container",5)(3,Ii,2,2,"ng-container",6),n(),f(4,Oi,10,1,"ng-template",null,0,Ce),n()),i&2&&(l(),s("ngSwitch",o.tab),l(),s("ngSwitchCase","Calls"))},dependencies:[T,dt,F,D,U,P,R,A,V,N,k,j,G,B,$,ut,L,z,K,E,q,Gt,W,H,Q,I,Vt,Dt,Pt,Ut,J,Y,X,Z,ee,ft,te,ie,ge,oe,re,ne,y,O,Nt,jt,w,xe,lt,st,mt,pt],styles:['ul.settings[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}ul.settings[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.4rem .5rem}.bg-red-100[_ngcontent-%COMP%]{background-color:var(--red-100)}.chat-left[_ngcontent-%COMP%]{position:relative;background:#3b82f6;color:#fff;padding:12px 16px;border-radius:12px}.chat-left[_ngcontent-%COMP%]:before{content:"";position:absolute;top:5px;left:-5px;width:0;height:0;border-top:5px solid transparent;border-right:5px solid #3b82f6;border-bottom:5px solid transparent}.chat-right[_ngcontent-%COMP%]{position:relative;background:#3b82f6;color:#fff;padding:12px 16px;border-radius:12px}.chat-right[_ngcontent-%COMP%]:before{content:"";position:absolute;top:5px;right:-5px;width:0;height:0;border-top:5px solid transparent;border-left:5px solid #3b82f6;border-bottom:5px solid transparent}.btn-grad[_ngcontent-%COMP%]{border:none;font-size:14px;background-image:linear-gradient(to right,#00d2ff,#3a7bd5 51%,#00d2ff)}.btn-grad[_ngcontent-%COMP%]{margin:10px;padding:15px 45px;text-align:center;text-transform:uppercase;transition:.5s;background-size:200% auto;color:#fff;box-shadow:0 0 20px #eee;border-radius:10px;display:block}.btn-grad[_ngcontent-%COMP%]:hover{background-position:right center;color:#fff;text-decoration:none}.chat[_ngcontent-%COMP%]{display:block}@media (max-width: 768px){.chat[_ngcontent-%COMP%]{display:none}}.chat-mobile[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.chat-mobile[_ngcontent-%COMP%]{display:block}}.toggle-sidebar[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.toggle-sidebar[_ngcontent-%COMP%]{display:block}}']})}}return t})();var fr=(()=>{class t{constructor(){this.authService=d(pe),this.sidebarService=d(be),this.isMobileSidebarOpen=!1}ngOnInit(){this.getAllUsers(),this.subs=this.sidebarService.mobileSidebar$.subscribe(e=>{console.log(e),this.isMobileSidebarOpen=e})}getAllUsers(){this.authService.getAllUsers().subscribe(e=>{localStorage.setItem("users",JSON.stringify(e))})}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=g({type:t,selectors:[["app-chats"]],standalone:!0,features:[h],decls:6,vars:2,consts:[[1,"w-screen","min-h-screen","bg-primary","flex","justify-content-center","align-items-center"],[1,"flex","gap-2","align-items-center",2,"height","95vh","width","95vw"],[1,"sidebar"],[1,"chatbox","flex-grow-1"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),c(3,"app-sidebar"),n(),r(4,"div",3),c(5,"app-chatbox"),n()()()),i&2&&(l(2),wt("open",o.isMobileSidebarOpen))},dependencies:[O,w,T,F,D,U,P,R,A,V,N,k,j,G,B,$,L,z,K,E,q,W,H,Q,I,J,Y,X,Z,ee,te,ie,oe,re,ne,y,ti,ii],styles:[".grid[_ngcontent-%COMP%]{margin:0}.sidebar[_ngcontent-%COMP%]{width:22rem;height:90vh}@media (max-width: 1024px){.sidebar[_ngcontent-%COMP%]{width:18rem}}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:absolute;width:100vw;left:-100vw;height:100vh;overflow:hidden;background-color:#0000004d;z-index:999}.sidebar.open[_ngcontent-%COMP%]{left:0;box-shadow:#00000040 0 54px 55px,#0000001f 0 -12px 30px,#0000001f 0 4px 6px,#0000002b 0 12px 13px,#00000017 0 -3px 5px}}"]})}}return t})();export{fr as ChatsComponent};
